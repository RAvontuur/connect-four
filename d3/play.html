<!doctype html>
<html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.8/d3.min.js" type="text/JavaScript"></script>
</head>
<body>
<svg style="width:1000px;height:1000px;">
</svg>
<script>
    fetch('http://localhost:5000/greet')
        .then(response => response.json())
        .then(json => process(json));

    function symbolToColor(symbol) {
        var obj = {"X": "red", "O": "yellow", " ": "none"};
        return obj[symbol];
    }

    function process(json) {
        console.log(json);

        d3.select("svg")
            .selectAll("rect")
            .data(json.state.split(""))
            .enter()
            .append("circle")
            .attr("r", 45)
            .attr("cx", (d, i) => 50 + i % 7 * 100)
            .attr("cy", (d, i) => 600 - 100 * Math.floor(i / 7))
            .style("fill", d => symbolToColor(d));
    }
</script>
</body>
</html>
